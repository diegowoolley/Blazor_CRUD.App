@page "/produtos"
@using Microsoft.EntityFrameworkCore
@using Microsoft.AspNetCore.Components.QuickGrid
@using BlazorCRUD.App.Data
@using Blazor_CRUD.App.Data
@implements IAsyncDisposable
@inject IDbContextFactory<Blazor_CRUD.App.Data.ApplicationDbContext> DbFactory

<PageTitle>Produtos</PageTitle>

<h1>Lista de Produtos</h1>

<a class="btn mt-4 mb-4" href="/produtos/create">

    <img src="stuffitboxproduct_stuffit_caj_2624.png" alt="Produto" height="40" width="40" />

</a>


<QuickGrid Class="table table-bordered table-primary text-center" Items="context.produtos">
    <PropertyColumn Property="produtos => produtos.Descricao" />
    <PropertyColumn Property="produtos => produtos.Quantidade" />
    <PropertyColumn Property="produtos => produtos.Preco" />

    <TemplateColumn Context="produtos">
        <a class="btn mt-1 mb-1" href="@($"produtos/edit?id={produtos.Id}")">
           
            
            <img src="businesssettings_thebox_theproduct_negocio_2327.png" alt="Editar produto" height="30" width="30" />
        
        </a> |
        <a class="btn mt-1 mb-1" href="@($"produtos/details?id={produtos.Id}")">
           
            
         <img src="business_inventory_maintenance_product_box_boxes_2326.png" alt="Detalhes produto" height="30" width="30" />

        
        </a> |
        <a href="@($"produtos/delete?id={produtos.Id}")">
            
        <img src="32officeicons-3_89720.png" alt="Remover produto" height="30" width="30" />
        
        </a>
    </TemplateColumn>
</QuickGrid>

@code {
    private ApplicationDbContext context = default!;

    protected override void OnInitialized()
    {
        context = DbFactory.CreateDbContext();
    }

    public async ValueTask DisposeAsync() => await context.DisposeAsync();
}
